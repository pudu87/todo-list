(()=>{"use strict";class e{constructor(e){this.title=e.title,this.description=e.description,this.dueDate=e.dueDate,this.priority=e.priority,this.projectId=e.projectId,this.id=e.id}get title(){return this._title}set title(e){this._title=e}}class t{constructor(e){this.name=e.name,this.id=e.id}get name(){return this._name}set name(e){this._name=e}}const o=[{name:"default",id:0}],i=[],n=e=>{e.id=o.length?o[o.length-1].id+1:0;let i=new t(e);o.push(i)},d=e=>{let i=o.findIndex((t=>e.id==t.id)),n=new t(e);void 0===e.completed?o.splice(i,1,n):(o.splice(i,1),l(n.id))},c=t=>{t.id=i.length?i[i.length-1].id+1:0;let o=new e(t);return i.push(o),o},r=t=>{let o=i.findIndex((e=>t.id==e.id)),n=new e(t);return void 0===t.completed?i.splice(o,1,n):i.splice(o,1),n},l=e=>{let t=[];i.forEach(((o,i)=>{o.projectId==e&&t.unshift(i)})),t.forEach((e=>{i.splice(e,1)}))},u=()=>{!function(){let e=document.querySelector("#projects ul");e.textContent="",o.forEach((t=>{D(e,"li",t.name,`project_${t.id}`)}))}(),document.querySelectorAll("#projects li").forEach((e=>{e.addEventListener("click",(e=>{let t=a(e.target),o=s(t);document.querySelector("#projects button").classList[0]&&p(),y(t,o)}))})),document.querySelector("#projects button").addEventListener("click",p),document.querySelector("#new-project").addEventListener("submit",m)};function a(e){let t=e.classList[0].split("_")[1];return o.find((e=>e.id==t))}function s(e){let t=[];return i.forEach((o=>{o.projectId==e.id&&t.push(o)})),t}function p(){let e=document.querySelector("#projects button"),t=document.querySelector("#new-project");e.classList.toggle("display-none"),t.classList.toggle("display-none")}function m(e){e.preventDefault();let t=document.querySelector("#new-project-name").value;n({name:t}),p(),u()}const y=(e,t)=>{let o=document.querySelector("#project");g(),E(),function(e,t){let o=D(e,"header","",`project_${t.id}`);D(o,"h1",t.name),function(e,t){let o=D(e,"form","","display-none");o.id="update-project";let i=D(o,"input","");i.type="text",i.id="update-project-name",i.value=t.name;let n=D(o,"input","");n.type="submit",n.value="Change"}(o,t);let i=D(o,"div","");["o","x"].forEach((e=>{D(i,"span",e,e)}))}(o,e),function(e,t){let o=D(e,"ul","");t.forEach((e=>{let t=D(o,"li","",`todo_${e.id}`);D(t,"h2",e.title),D(t,"div",e.dueDate)}))}(o,t),function(e){D(e,"button","New Todo").id="new-todo-button"}(o),document.querySelectorAll("#project li").forEach((e=>{e.addEventListener("click",(e=>{let t=j(e);q(t)}))})),document.querySelector("#project .o").addEventListener("click",f),document.querySelector("#project .x").addEventListener("click",h),document.querySelector("#update-project").addEventListener("submit",(e=>{!function(e){e.preventDefault();let t=document.querySelector("#update-project-name").value,o=document.querySelector("#project header").classList[0].split("_")[1];d({name:t,id:o}),f(),u()}(e);let o=a(e.target.parentNode);y(o,t)})),document.querySelector("#new-todo-button").addEventListener("click",(()=>{q(0),document.querySelector("#todo .o").classList.toggle("display-none"),document.querySelector("#todo input:last-child").value="Create",S()}))};function f(){let e=document.querySelector("#project header h1"),t=document.querySelector("#update-project");e.classList.toggle("display-none"),t.classList.toggle("display-none")}function h(){let e=document.querySelector("#project header").classList[0].split("_")[1];d({name,id:e,completed:!0}),g(),u()}function j(e){let t=e.currentTarget.classList[0].split("_")[1];return i.find((e=>e.id==t))}const q=e=>{let t=document.querySelector("#todo");E(),function(e,t){let o=D(e,"header","",`todo_${t.id}`);D(o,"h1","");let i=D(o,"div","");["o","x"].forEach((e=>{D(i,"span",e,e)}))}(t,e),function(e,t){let o=D(e,"form","","display-none");o.id="update-todo",["title","description","dueDate"].forEach((e=>{let i=e.charAt(0).toUpperCase()+e.slice(1)+":";D(o,"label",i).for=`update-todo-${e}`;let n=D(o,"input","");n.type="text",n.id=`update-todo-${e}`,n.value=null==t[e]?"":t[e]}));let i=D(o,"input","");i.type="submit",i.value="Change"}(t,e),function(e,t){let o=D(e,"article","");D(o,"h2",t.title),D(o,"p",t.description),D(o,"div",t.dueDate)}(t,e),document.querySelector("#todo .o").addEventListener("click",S),document.querySelector("#todo .x").addEventListener("click",v),document.querySelector("#update-todo").addEventListener("submit",L)};function S(){let e=document.querySelector("#todo article"),t=document.querySelector("#update-todo");e.classList.toggle("display-none"),t.classList.toggle("display-none")}function v(){let e=document.querySelector("#todo header").classList[0].split("_")[1];if("undefined"==e)E();else{let t=i.find((t=>t.id==e));r({id:e,completed:!0}),E();let n=o.find((e=>e.id==t.projectId)),d=s(n);y(n,d)}}function L(e){e.preventDefault();let t,n=document.querySelector("#todo header").classList[0].split("_")[1],d=i.find((e=>e.id==n)),l=document.querySelector("#update-todo-title").value,u=document.querySelector("#update-todo-description").value,a=document.querySelector("#update-todo-dueDate").value;"undefined"==n?(t=document.querySelector("#project header").classList[0].split("_")[1],d=c({title:l,description:u,dueDate:a,priority:0,projectId:t})):(t=d.projectId,d=r({title:l,description:u,dueDate:a,priority:0,projectId:t,id:n})),S(),q(d);let p=o.find((e=>e.id==d.projectId)),m=s(p);y(p,m)}function g(){document.querySelector("#project").textContent=""}function E(){document.querySelector("#todo").textContent=""}function D(e,t,o,i=0){let n=document.createElement(t);return n.textContent=o,i&&n.classList.add(i),e.appendChild(n)}c({title:"a",description:"a",dueDate:"a",priority:"a",projectId:"0"}),c({title:"b",description:"b",dueDate:"b",priority:"b",projectId:"0"}),c({title:"c",description:"c",dueDate:"c",priority:"c",projectId:"1"}),c({title:"d",description:"d",dueDate:"d",priority:"d",projectId:"2"}),c({title:"e",description:"e",dueDate:"e",priority:"e",projectId:"3"}),c({title:"f",description:"f",dueDate:"f",priority:"f",projectId:"4"}),n({name:"p"}),n({name:"q"}),n({name:"r"}),n({name:"s"}),u()})();