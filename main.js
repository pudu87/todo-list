(()=>{"use strict";class e{constructor(e){this.title=e.title,this.description=e.description,this.dueDate=e.dueDate,this.priority=e.priority,this.projectId=e.projectId,this.id=e.id}get title(){return this._title}set title(e){this._title=e}}class t{constructor(e){this.name=e.name,this.id=e.id}get name(){return this._name}set name(e){this._name=e}}const o=[{name:"default",id:0}],c=[],i=e=>{e.id=o.length?o[o.length-1].id+1:0;let c=new t(e);o.push(c)},n=e=>{let c=o.findIndex((t=>e.id==t.id)),i=new t(e);void 0===e.completed?o.splice(c,1,i):(o.splice(c,1),d(i.id))},r=t=>{t.id=c.length?c[c.length-1].id+1:0;let o=new e(t);c.push(o)},d=e=>{let t=[];c.forEach(((o,c)=>{o.projectId==e&&t.unshift(c)})),t.forEach((e=>{c.splice(e,1)}))},l=()=>{!function(){let e=document.querySelector("#projects ul");e.textContent="",o.forEach((t=>{v(e,"li",t.name,`project_${t.id}`)}))}(),document.querySelectorAll("#projects li").forEach((e=>{e.addEventListener("click",u)})),document.querySelector("#projects button").addEventListener("click",s),document.querySelector("#new-project").addEventListener("submit",a)};function u(e){let t=e.target.classList[0].split("_")[1],i=o.find((e=>e.id==t)),n=[];c.forEach((e=>{e.projectId==t&&n.push(e)})),document.querySelector("#projects button").classList[0]&&s(),p(i,n)}function s(){let e=document.querySelector("#projects button"),t=document.querySelector("#new-project");e.classList.toggle("display-none"),t.classList.toggle("display-none")}function a(e){e.preventDefault();let t=document.querySelector("#new-project-name").value;i({name:t}),s(),l()}const p=(e,t)=>{let o=document.querySelector("#project");q(),S(),function(e,t){let o=v(e,"header","",`project_${t.id}`);v(o,"h1",t.name),function(e,t){let o=v(e,"form","",`project_${t.id}`);o.classList.add("display-none"),o.id="update-project";let c=v(o,"input","");c.type="text",c.id="update-project-name",c.value=t.name;let i=v(o,"input","");i.type="submit",i.value="Change"}(o,t);let c=v(o,"div","");["o","x"].forEach((e=>{v(c,"span",e,e)}))}(o,e),function(e,t){let o=v(e,"ul","");t.forEach((e=>{let t=v(o,"li","",`todo_${e.id}`);v(t,"h2",e.title),v(t,"div",e.dueDate)}))}(o,t),document.querySelectorAll("#project li").forEach((e=>{e.addEventListener("click",y)})),document.querySelector("#project .o").addEventListener("click",m),document.querySelector("#project .x").addEventListener("click",h),document.querySelector("#update-project").addEventListener("submit",f)};function m(){let e=document.querySelector("#project header h1"),t=document.querySelector("#update-project");e.classList.toggle("display-none"),t.classList.toggle("display-none")}function h(){let e=document.querySelector("#project header").classList[0].split("_")[1];n({name,id:e,completed:!0}),q(),l()}function f(e){e.preventDefault();let t=document.querySelector("#update-project-name").value,o=document.querySelector("#project header").classList[0].split("_")[1];n({name:t,id:o}),m(),l(),u(e)}function y(e){let t=e.currentTarget.classList[0].split("_")[1],o=c.find((e=>e.id==t));j(o)}const j=e=>{let t=document.querySelector("#todo");S(),function(e,t){let o=v(e,"header","");v(o,"h1","");let c=v(o,"div","");["o","x"].forEach((e=>{v(c,"span",e)}))}(t),function(e,t){let o=v(e,"article","");v(o,"h2",t.title),v(o,"p",t.description),v(o,"div",t.dueDate)}(t,e)};function q(){document.querySelector("#project").textContent=""}function S(){document.querySelector("#todo").textContent=""}function v(e,t,o,c=0){let i=document.createElement(t);return i.textContent=o,c&&i.classList.add(c),e.appendChild(i)}r({title:"a",description:"a",dueDate:"a",priority:"a",projectId:"0"}),r({title:"b",description:"b",dueDate:"b",priority:"b",projectId:"0"}),r({title:"c",description:"c",dueDate:"c",priority:"c",projectId:"1"}),r({title:"d",description:"d",dueDate:"d",priority:"d",projectId:"2"}),r({title:"e",description:"e",dueDate:"e",priority:"e",projectId:"3"}),r({title:"f",description:"f",dueDate:"f",priority:"f",projectId:"4"}),i({name:"p"}),i({name:"q"}),i({name:"r"}),i({name:"s"}),l()})();