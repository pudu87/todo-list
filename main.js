(()=>{"use strict";class e{constructor(e){this.title=e.title,this.description=e.description,this.dueDate=e.dueDate,this.priority=e.priority,this.projectId=e.projectId,this.id=e.id}}class t{constructor(e){this.name=e.name,this.id=e.id}}const o=[{name:"default",id:0}],n=[];function i(e){e.id=o.length?o[o.length-1].id+1:0;let n=new t(e);o.push(n)}function c(t){t.id=n.length?n[n.length-1].id+1:0;let o=new e(t);return n.push(o),o}function d(e){return o.find((t=>t.id==e))}function r(e){let t=[];return n.forEach((o=>{o.projectId==e&&t.push(o)})),t}function l(e){return n.find((t=>t.id==e))}function u(){document.querySelector("#project").textContent=""}function a(){document.querySelector("#todo").textContent=""}function s(e,t,o,n=0){let i=document.createElement(t);return i.textContent=o,n&&i.classList.add(n),e.appendChild(i)}const p=document.querySelector("#todo");function f(e){a(),function(e){let t=s(p,"header","",`todo_${e.id}`);s(t,"h1","");let o=s(t,"div","");["o","x"].forEach((e=>{s(o,"span",e,e)}))}(e),function(e){let t=s(p,"form","","display-none");t.id="update-todo",["title","description","dueDate"].forEach((o=>{let n=o.charAt(0).toUpperCase()+o.slice(1)+":";s(t,"label",n).for=`update-todo-${o}`;let i=s(t,"input","");i.type="text",i.id=`update-todo-${o}`,i.value=null==e[o]?"":e[o]}));let o=s(t,"input","");o.type="submit",o.value="Change"}(e),function(e){let t=s(p,"article","");s(t,"h2",e.title),s(t,"p",e.description),s(t,"div",e.dueDate)}(e),document.querySelector("#todo .o").addEventListener("click",m),document.querySelector("#todo .x").addEventListener("click",y),document.querySelector("#update-todo").addEventListener("submit",h)}function m(){let e=document.querySelector("#todo article"),t=document.querySelector("#update-todo");e.classList.toggle("display-none"),t.classList.toggle("display-none")}function y(){let e=document.querySelector("#todo header").classList[0].split("_")[1],t=document.querySelector("#project header").classList[0].split("_")[1];if(function(e){let t=n.findIndex((t=>e==t.id));n.splice(t,1)}(e),a(),"undefined"!=e){let e=d(t);q(e,r(e.id))}}function h(t){t.preventDefault();let o=function(){let t,o=document.querySelector("#todo header").classList[0].split("_")[1],i=l(o),d=document.querySelector("#update-todo-title").value,r=document.querySelector("#update-todo-description").value,u=document.querySelector("#update-todo-dueDate").value;return"undefined"==o?(t=document.querySelector("#project header").classList[0].split("_")[1],i=c({title:d,description:r,dueDate:u,priority:0,projectId:t})):(t=i.projectId,i=function(t){let o=n.findIndex((e=>t.id==e.id)),i=new e(t);return n.splice(o,1,i),i}({title:d,description:r,dueDate:u,priority:0,projectId:t,id:o})),i}();m(),f(o);let i=d(o.projectId);q(i,r(i.id))}const j=document.querySelector("#project");function q(e,i){u(),a(),function(e){let t=s(j,"header","",`project_${e.id}`);s(t,"h1",e.name),function(e,t){let o=s(e,"form","","display-none");o.id="update-project";let n=s(o,"input","");n.type="text",n.id="update-project-name",n.value=t.name;let i=s(o,"input","");i.type="submit",i.value="Change"}(t,e);let o=s(t,"div","");["o","x"].forEach((e=>{s(o,"span",e,e)}))}(e),function(e,t){let o=s(j,"ul","");0==e.id&&(t=n),t.forEach((e=>{let t=s(o,"li","",`todo_${e.id}`);s(t,"h2",e.title),s(t,"div",e.dueDate)}))}(e,i),s(j,"button","New Todo").id="new-todo-button",document.querySelectorAll("#project li").forEach((e=>{e.addEventListener("click",S)})),document.querySelector("#project .o").addEventListener("click",L),document.querySelector("#project .x").addEventListener("click",v),document.querySelector("#update-project").addEventListener("submit",(e=>function(e,n){e.preventDefault(),function(e){let n=o.findIndex((t=>e.id==t.id)),i=new t(e);o.splice(n,1,i)}({name:document.querySelector("#update-project-name").value,id:document.querySelector("#project header").classList[0].split("_")[1]}),L(),I(),q(d(e.target.parentNode.classList[0].split("_")[1]),n)}(e,i))),document.querySelector("#new-todo-button").addEventListener("click",g)}function S(e){f(l(e.currentTarget.classList[0].split("_")[1]))}function L(){let e=document.querySelector("#project header h1"),t=document.querySelector("#update-project");e.classList.toggle("display-none"),t.classList.toggle("display-none")}function v(){let e=document.querySelector("#project header").classList[0].split("_")[1];0==e?alert("Default map cannot be deleted!"):(function(e){let t=o.findIndex((t=>e==t.id));o.splice(t,1),function(e){let t=[];n.forEach(((o,n)=>{o.projectId==e&&t.unshift(n)})),t.forEach((e=>{n.splice(e,1)}))}(e)}(e),u(),I())}function g(){f(0),document.querySelector("#todo .o").classList.toggle("display-none"),document.querySelector("#todo input:last-child").value="Create",m()}const E=document.querySelector("#projects button"),D=document.querySelector("#new-project");function I(){!function(){let e=document.querySelector("#projects ul");e.textContent="",o.forEach((t=>{s(e,"li",t.name,`project_${t.id}`)}))}(),document.querySelectorAll("#projects li").forEach((e=>{e.addEventListener("click",b)})),document.querySelector("#projects button").addEventListener("click",x),document.querySelector("#new-project").addEventListener("submit",_)}function b(e){let t=d(e.target.classList[0].split("_")[1]),o=r(t.id);E.classList.contains("display-none")&&x(),q(t,o)}function x(){E.classList.toggle("display-none"),D.classList.toggle("display-none")}function _(e){e.preventDefault(),i({name:document.querySelector("#new-project-name").value}),x(),I();let t=o[o.length-1];q(t,r(t))}c({title:"a",description:"a",dueDate:"a",priority:"a",projectId:"0"}),c({title:"b",description:"b",dueDate:"b",priority:"b",projectId:"0"}),c({title:"c",description:"c",dueDate:"c",priority:"c",projectId:"1"}),c({title:"d",description:"d",dueDate:"d",priority:"d",projectId:"2"}),c({title:"e",description:"e",dueDate:"e",priority:"e",projectId:"3"}),c({title:"f",description:"f",dueDate:"f",priority:"f",projectId:"4"}),i({name:"p"}),i({name:"q"}),i({name:"r"}),i({name:"s"}),I()})();